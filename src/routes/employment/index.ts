import { Request, Response, Router } from "express";
import qrcode from "qrcode";
import Credentials from "../../database/Credentials";
import PRequests from "../../database/PresentationRequests";
import PresentationRequestTemplates from "../../database/PresentationRequestTemplates";
import Submissions from "../../database/PresentationSubmissions";
import createCredential from "../../utils/createCredential";
import createPresentationRequest from "../../utils/createPresentationRequest";
import fetchSubmission from "../../utils/fetchSubmission";
import generateRandomString from "../../utils/generateRandomString";

const router = Router();

router.get("/pr", async (req: Request, res: Response) => {
  const prt = await PresentationRequestTemplates.findOne({});
  const cityTemplateId = (prt as any).city as string;
  const degreeTemplateId = (prt as any).degree as string;

  const templateIds = [cityTemplateId, degreeTemplateId];

  const pr = await createPresentationRequest(templateIds);

  const show = {
    requestType: "presentationRequest",
    pr,
  };

  const prmodel = await PRequests.findOne({});
  (prmodel as any).employment = pr.id;
  await prmodel.save();

  const prQR = await qrcode.toDataURL(JSON.stringify(show));
  return res.json({
    qrcode: prQR,
  });
});

router.get("/poll", async (req: Request, res: Response) => {
  const prmodel = await PRequests.findOne({});

  const response = await fetchSubmission((prmodel as any).employment);

  if (response === "NA") {
    return res.sendStatus(400);
  } else {
    const submission = await Submissions.findOne({});
    (submission as any).employment = response;
    await submission.save();
    return res.sendStatus(200);
  }
});

router.post("/cred", async (req: Request, res: Response) => {
  const c = await Credentials.findOne({});
  const did = (c as any).did;

  const unsignedVC = {
    "@context": [
      "https://www.w3.org/2018/credentials/v1",
      "https://schema.org",
    ],
    name: "Employment Proof",
    image: "data:image/png;base64,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",
    issuerOrganization: "Acme Corp",
    type: ["VerifiableCredential", "FlexLandEmploymentCredential"],
    credentialSubject: {
      id: did,
      employer: "Acme Corp",
      employeeId: generateRandomString(10),
    },
    issuer: process.env.ORG_DID,
    saveToBank: true,
    isRevocable: false,
  };

  const signedVc = await createCredential(unsignedVC);
  (c as any).employmentId = signedVc;
  await c.save();

  const saveRequest = {
    requestType: "credentialSave",
    vc: signedVc,
  };

  const vcQR = await qrcode.toDataURL(JSON.stringify(saveRequest));
  return res.json({
    qrcode: vcQR,
  });
});

export default router;
