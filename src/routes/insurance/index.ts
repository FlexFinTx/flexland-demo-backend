import { Request, Response, Router } from "express";
import qrcode from "qrcode";
import Credentials from "../../database/Credentials";
import PRequests from "../../database/PresentationRequests";
import PresentationRequestTemplates from "../../database/PresentationRequestTemplates";
import Submissions from "../../database/PresentationSubmissions";
import createCredential from "../../utils/createCredential";
import createPresentationRequest from "../../utils/createPresentationRequest";
import fetchSubmission from "../../utils/fetchSubmission";
import generateRandomString from "../../utils/generateRandomString";

const router = Router();

router.get("/pr", async (req: Request, res: Response) => {
  const prt = await PresentationRequestTemplates.findOne({});
  const cityTemplateId = (prt as any).city as string;
  const degreeTemplateId = (prt as any).degree as string;
  const employmentTemplateId = (prt as any).employment as string;

  const templateIds = [cityTemplateId, degreeTemplateId, employmentTemplateId];

  const pr = await createPresentationRequest(templateIds);

  const show = {
    requestType: "presentationRequest",
    pr,
  }

  const prmodel = await PRequests.findOne({});
  (prmodel as any).insurance = pr.id;
  await prmodel.save();

  const prQR = await qrcode.toDataURL(JSON.stringify(show));
  return res.json({
    qrcode: prQR,
  });
});

router.get("/poll", async (req: Request, res: Response) => {
  const prmodel = await PRequests.findOne({});

  const response = await fetchSubmission((prmodel as any).insurance);

  if (response === "NA") {
    return res.sendStatus(400);
  } else {
    const submission = await Submissions.findOne({});
    (submission as any).insurance = response;
    await submission.save();
    return res.sendStatus(200);
  }
});

router.post("/cred", async (req: Request, res: Response) => {
  const c = await Credentials.findOne({});
  const did = (c as any).did;

  const unsignedVC = {
    "@context": [
      "https://www.w3.org/2018/credentials/v1",
      "https://schema.org",
    ],
    type: ["VerifiableCredential", "FlexLandInsuranceCredential"],
    name: "Insurance",
    image: "data:image/png;base64,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",
    issuerOrganization: "We Care",
    credentialSubject: {
      id: did,
      insurer: "We Care Pvt Ltd.",
      insuranceId: generateRandomString(10),
    },
    issuer: process.env.ORG_DID,
    saveToBank: true,
    isRevocable: false,
  };

  const signedVc = await createCredential(unsignedVC);
  (c as any).insurance = signedVc;
  await c.save();

  const saveRequest = {
    requestType: "credentialSave",
    vc: signedVc,
  };

  const vcQR = await qrcode.toDataURL(JSON.stringify(saveRequest));
  return res.json({
    qrcode: vcQR,
  });
});

export default router;
